{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/Peoples Practice/Aeroconvert-frontend/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\nimport Home from \"./pages/Home\";\nimport Login from \"./pages/Login\";\nimport Register from \"./pages/Register\";\nimport Dashboard from \"./pages/Dashboard\";\nimport Profile from \"./pages/Profile\";\nimport { SetAllAccessTokens, StoreContext } from \"./mobx stores/RootStore\";\nimport { auth, onAuthStateChangedListener\n// requestPermission,\n} from \"./firebase/firebase\";\nimport PrivateRoute from \"./component/PrivateRoute\";\n// import ProtectedRoute from \"./component/ProtectedRoute\";\nimport { observer } from \"mobx-react-lite\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const {\n    profileStore,\n    authStore,\n    walletStore\n  } = useContext(StoreContext);\n  const [user, setUser] = useState(null);\n  const [activeUser, setActiveUser] = React.useState(false || window.sessionStorage.getItem(\"userStatus\") === \"true\");\n  useEffect(() => {\n    const unsubscribe = onAuthStateChangedListener(async res => {\n      if (res) {\n        res === null || res === void 0 ? void 0 : res.getIdToken(true).then(idToken => {\n          window.sessionStorage.setItem(\"accessToken\", idToken);\n          SetAllAccessTokens(idToken);\n          try {\n            authStore.setUser(res);\n            profileStore.getProfile();\n            // walletStore.getWallet(); // to call when on dashboard and disable from here\n          } catch (error) {} finally {}\n        });\n        if (res) {\n          if (res.emailVerified) {\n            window.sessionStorage.setItem(\"userStatus\", \"true\");\n            setActiveUser(true);\n          }\n        } else {\n          window.sessionStorage.setItem(\"userStatus\", \"false\");\n          setActiveUser(false);\n        }\n        return res ? setUser(res) : setUser(null);\n      }\n    });\n    return unsubscribe;\n  }, []);\n  useEffect(() => {\n    const checkAndRenewToken = async () => {\n      const userData = auth.currentUser;\n      if (userData) {\n        try {\n          await userData.getIdToken(true).then(idToken => {\n            window.sessionStorage.setItem(\"accessToken\", idToken);\n            SetAllAccessTokens(idToken);\n          });\n          // console.debug('Token refreshed successfully.');\n        } catch (err) {\n          // console.debug('Error refreshing token:', err);\n        }\n      }\n    };\n    const intervalCheck = setInterval(checkAndRenewToken, 600000);\n    return () => clearInterval(intervalCheck);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"\",\n    children: /*#__PURE__*/_jsxDEV(Router, {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/*\",\n          element: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/login\",\n          element: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/register\",\n          element: /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 46\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          element: /*#__PURE__*/_jsxDEV(PrivateRoute, {\n            activeUser: auth.currentUser\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 27\n          }, this),\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/dashboard\",\n            element: /*#__PURE__*/_jsxDEV(Dashboard, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/profile\",\n            element: /*#__PURE__*/_jsxDEV(Profile, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"jMRyVU5q5c/KrAkByMBzQPJEpFg=\");\n_c = App;\nexport default _c2 = observer(App);\nvar _c, _c2;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useContext","useEffect","useState","BrowserRouter","Router","Routes","Route","Home","Login","Register","Dashboard","Profile","SetAllAccessTokens","StoreContext","auth","onAuthStateChangedListener","PrivateRoute","observer","jsxDEV","_jsxDEV","App","_s","profileStore","authStore","walletStore","user","setUser","activeUser","setActiveUser","window","sessionStorage","getItem","unsubscribe","res","getIdToken","then","idToken","setItem","getProfile","error","emailVerified","checkAndRenewToken","userData","currentUser","err","intervalCheck","setInterval","clearInterval","className","children","path","element","fileName","_jsxFileName","lineNumber","columnNumber","_c","_c2","$RefreshReg$"],"sources":["/Users/mac/Desktop/Peoples Practice/Aeroconvert-frontend/src/App.tsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\nimport Home from \"./pages/Home\";\nimport Login from \"./pages/Login\";\nimport Register from \"./pages/Register\";\nimport Dashboard from \"./pages/Dashboard\";\nimport Profile from \"./pages/Profile\";\nimport { SetAllAccessTokens, StoreContext } from \"./mobx stores/RootStore\";\nimport {\n  auth,\n  onAuthStateChangedListener,\n  // requestPermission,\n} from \"./firebase/firebase\";\nimport PrivateRoute from \"./component/PrivateRoute\";\n// import ProtectedRoute from \"./component/ProtectedRoute\";\nimport { observer } from \"mobx-react-lite\";\n\nfunction App() {\n  const { profileStore, authStore, walletStore } = useContext(StoreContext);\n  const [user, setUser] = useState<null | any>(null);\n  const [activeUser, setActiveUser] = React.useState(\n    false || window.sessionStorage.getItem(\"userStatus\") === \"true\"\n  );\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChangedListener(async (res: any) => {\n      if (res) {\n        res?.getIdToken(true).then((idToken: string) => {\n          window.sessionStorage.setItem(\"accessToken\", idToken);\n          SetAllAccessTokens(idToken);\n          try {\n            authStore.setUser(res);\n            profileStore.getProfile();\n            // walletStore.getWallet(); // to call when on dashboard and disable from here\n          } catch (error) {\n          } finally {\n          }\n        });\n        if (res) {\n          if (res.emailVerified) {\n            window.sessionStorage.setItem(\"userStatus\", \"true\");\n            setActiveUser(true);\n          }\n        } else {\n          window.sessionStorage.setItem(\"userStatus\", \"false\");\n          setActiveUser(false);\n        }\n        return res ? setUser(res) : setUser(null);\n      }\n    });\n    return unsubscribe;\n  }, []);\n\n  useEffect(() => {\n    const checkAndRenewToken = async () => {\n      const userData: any = auth.currentUser;\n      if (userData) {\n        try {\n          await userData.getIdToken(true).then((idToken: string) => {\n            window.sessionStorage.setItem(\"accessToken\", idToken);\n            SetAllAccessTokens(idToken);\n          });\n          // console.debug('Token refreshed successfully.');\n        } catch (err) {\n          // console.debug('Error refreshing token:', err);\n        }\n      }\n    };\n    const intervalCheck = setInterval(checkAndRenewToken, 600000);\n\n    return () => clearInterval(intervalCheck);\n  }, []);\n\n  return (\n    <div className=\"\">\n      <Router>\n        <Routes>\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"/*\" element={<Home />} />\n          <Route path=\"/login\" element={<Login />} />\n            <Route path=\"/register\" element={<Register />} />\n          <Route element={<PrivateRoute activeUser={auth.currentUser} />}>\n            <Route path=\"/dashboard\" element={<Dashboard />} />\n            <Route path=\"/profile\" element={<Profile />} />\n          </Route>\n        </Routes>\n      </Router>\n    </div>\n  );\n}\n\nexport default observer(App);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}