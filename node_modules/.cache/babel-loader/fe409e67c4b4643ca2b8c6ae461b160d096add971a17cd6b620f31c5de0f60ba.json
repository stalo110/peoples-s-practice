{"ast":null,"code":"import axios from\"axios\";import{configure,makeAutoObservable,runInAction}from\"mobx\";import BaseDirectories from\"../base directories/BaseDirectories\";configure({enforceActions:\"always\"});// eslint-disable-next-line @typescript-eslint/no-var-requires\nexport class ProfileStore{constructor(){this.loadingData=true;this.submitting=false;this.error=\"\";this.success=\"\";this.userId=\"\";this.profile={};this.token=sessionStorage.getItem(\"accessToken\")||\"\";this.message={type:\"\",msg:\"\"};this.userProfile=void 0;this.setMessage=(type,msg)=>{this.message.type=type;this.message.msg=msg;};this.setSubmitting=val=>{this.submitting=val;};this.setLoading=val=>{this.loadingData=val;};this.setProfile=res=>{this.profile=res;// this.logger.info(`User | Get Profile | ${res.email}`, res);\n};this.setError=err=>{this.error=err;};this.setSuccess=msg=>{this.success=msg;// this.success_setting = msg;\n};this.setToLocalStorage=(key,value)=>{window.sessionStorage.setItem(key,JSON.stringify(value));};this.SetAccessToken=token=>{this.token=token||sessionStorage.getItem(\"accessToken\");};makeAutoObservable(this);runInAction(()=>{//   this.logger = new BrowserLogger(this.constructor.name);\nthis.userProfile=JSON.parse(sessionStorage.getItem(\"user\")||\"{}\");});}getProfile(){const headers={accept:\"application/json\",Authorization:\"Bearer \".concat(this.token),\"Content-Type\":\"application/json\"};this.setLoading(true);axios.get(\"\".concat(BaseDirectories.API_BASE_URL,\"/users/get-profile\"),{headers}).then(res=>{this.setProfile(res.data);this.setToLocalStorage(\"user\",res.data);runInAction(()=>this.userId=res.data._id);if(res){this.setToLocalStorage(\"isRegistered\",true);}}).catch(err=>{}).finally(()=>{this.setLoading(false);});}}","map":{"version":3,"names":["axios","configure","makeAutoObservable","runInAction","BaseDirectories","enforceActions","ProfileStore","constructor","loadingData","submitting","error","success","userId","profile","token","sessionStorage","getItem","message","type","msg","userProfile","setMessage","setSubmitting","val","setLoading","setProfile","res","setError","err","setSuccess","setToLocalStorage","key","value","window","setItem","JSON","stringify","SetAccessToken","parse","getProfile","headers","accept","Authorization","concat","get","API_BASE_URL","then","data","_id","catch","finally"],"sources":["/Users/mac/Desktop/Peoples Practice/Aeroconvert-frontend/src/mobx stores/ProfileStore.ts"],"sourcesContent":["import axios from \"axios\";\nimport { configure, makeAutoObservable, runInAction } from \"mobx\";\nimport BaseDirectories from \"../base directories/BaseDirectories\";\nimport { toast } from \"react-toastify\";\nconfigure({ enforceActions: \"always\" });\n// eslint-disable-next-line @typescript-eslint/no-var-requires\n\ntype Profile = {\n  [key: string]: any;\n};\n\nexport class ProfileStore {\n  loadingData = true;\n  submitting = false;\n  error = \"\";\n  success = \"\";\n  userId = \"\";\n  profile: Profile = {};\n  token: any = sessionStorage.getItem(\"accessToken\") || \"\";\n  message = {\n    type: \"\",\n    msg: \"\",\n  };\n\n  private userProfile!: Profile;\n  constructor() {\n    makeAutoObservable(this);\n    runInAction(() => {\n      //   this.logger = new BrowserLogger(this.constructor.name);\n      this.userProfile = JSON.parse(\n        sessionStorage.getItem(\"user\") || \"{}\"\n      ) as Profile;\n    });\n  }\n\n  getProfile() {\n    const headers = {\n      accept: \"application/json\",\n      Authorization: `Bearer ${this.token}`,\n      \"Content-Type\": \"application/json\",\n    };\n\n    this.setLoading(true);\n    axios\n      .get(`${BaseDirectories.API_BASE_URL}/users/get-profile`, {\n        headers,\n      })\n      .then((res: any) => {\n        this.setProfile(res.data);\n        this.setToLocalStorage(\"user\", res.data);\n        runInAction(() => (this.userId = res.data._id));\n        if (res) {\n          this.setToLocalStorage(\"isRegistered\", true);\n        }\n      })\n      .catch((err) => {})\n      .finally(() => {\n        this.setLoading(false);\n      });\n  }\n\n  setMessage = (type: string, msg: string) => {\n    this.message.type = type;\n    this.message.msg = msg;\n  };\n\n  setSubmitting = (val: boolean) => {\n    this.submitting = val;\n  };\n\n  setLoading = (val: boolean) => {\n    this.loadingData = val;\n  };\n  setProfile = (res: any) => {\n    this.profile = res;\n\n    // this.logger.info(`User | Get Profile | ${res.email}`, res);\n  };\n\n  setError = (err: string) => {\n    this.error = err;\n  };\n\n  setSuccess = (msg: string) => {\n    this.success = msg;\n    // this.success_setting = msg;\n  };\n\n  setToLocalStorage = (key: string, value: any) => {\n    window.sessionStorage.setItem(key, JSON.stringify(value));\n  };\n\n  SetAccessToken = (token: string) => {\n    this.token = token || sessionStorage.getItem(\"accessToken\");\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}